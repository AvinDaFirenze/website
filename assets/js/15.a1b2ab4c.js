(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{577:function(e,t,n){},707:function(e,t,n){"use strict";var a=n(577);n.n(a).a},725:function(e,t,n){"use strict";n.r(t);var a,o=n(74),r=(n(170),n(68),n(113),n(168),n(24),n(29),n(39),n(568),n(596)),s={data:function(){return{converterNames:r.getConversionSourcesNames(),loading:!1,successDialogVisible:!1,conversionResult:{type:"Paperback",unconverted:[],filename:"",fileType:"",backupData:null}}},methods:{sendFile:function(e){var t=this;this.$data.loading=!0,this.handleFile(e).then((function(e){t.$data.conversionResult=e,t.$data.successDialogVisible=!0,t.$data.loading=!1})).catch((function(e){console.error(e),t.$message({type:"error",message:e}),t.$data.loading=!1}))},handleFile:(a=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,a,o,s,i,c,u,l,p,d,v,h,b,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/json"!==t.file.type){e.next=18;break}return n=t.file.name.replace(".json","-TachiyomiConversion.proto.gz"),e.next=4,t.file.text();case 4:return a=e.sent,(o=new r.PaperbackBackupManager).loadText(a),s=o.exportBackup(),i=new r.PaperToTachiBackupConverter(s),e.next=11,i.conversion();case 11:return c=e.sent,u=c.backupObject,(l=new r.TachiyomiBackupManager).loadBackup(u),e.abrupt("return",{type:"Tachiyomi",unconverted:c.unconverted,filename:n,fileType:"application/x-gzip",backupData:l.exportProtoGz()});case 18:if("application/x-gzip"!==t.file.type){e.next=33;break}return p=t.file.name.replace(".proto.gz","-PaperbackConversion.json"),e.next=22,t.file.arrayBuffer();case 22:return d=e.sent,(v=new r.TachiyomiBackupManager).loadProtoGz(d),h=v.exportBackup(),b=new r.TachiToPaperBackupConverter(h),e.next=29,b.conversion();case 29:return f=e.sent,e.abrupt("return",{type:"Paperback",unconverted:f.unconverted,filename:p,fileType:"application/json",backupData:JSON.stringify(f.backupObject)});case 33:throw new Error("Unsupported file format: ".concat(t.file.type));case 34:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),downloadData:function(){if("Tachiyomi"!==this.$data.conversionResult.type&&"Paperback"!==this.$data.conversionResult.type)throw new Error("Unsupported converted type: ".concat(this.$data.conversionResult.type));var e=new Blob([this.$data.conversionResult.backupData],{type:this.$data.conversionResult.fileType}),t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=this.$data.conversionResult.filename,t.click()}}},i=(n(707),n(38)),c=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("ElDialog",{attrs:{title:"Successful backup conversion",visible:e.successDialogVisible,center:"",width:"80%"},on:{"update:visible":function(t){e.successDialogVisible=t}}},[n("div",{staticClass:"downloadBackup"},[n("ElButton",{attrs:{type:"primary",plain:""},on:{click:e.downloadData}},[e._v("Download the "+e._s(e.conversionResult.type)+" backup\n\t\t\t\t"),n("i",{staticClass:"el-icon-download"})])],1),e._v(" "),e.conversionResult.unconverted.length>0?n("div",[n("p",[e._v("\n\t\t\t\tThe conversion was successful but\n\t\t\t\t"+e._s(e.conversionResult.unconverted.length)+" items could not be\n\t\t\t\tresolved\n\t\t\t")]),e._v(" "),n("table",[n("thead",[n("tr",[n("th",[e._v("Source Id")]),e._v(" "),n("th",[e._v("Manga Title")])])]),e._v(" "),n("tbody",e._l(e.conversionResult.unconverted,(function(t){return n("tr",{key:t.sourceId+"-"+t.mangaId},[n("td",{staticClass:"sourceId"},[e._v(e._s(t.sourceId))]),e._v(" "),n("td",[e._v("\n\t\t\t\t\t\t\t"+e._s(t.mangaTitle)+"\n\t\t\t\t\t\t\t"),n("span",{staticClass:"mangaId"},[e._v("- "+e._s(t.mangaId))])])])})),0)])]):e._e()]),e._v(" "),n("p",{staticClass:"instruction"},[e._v("Provide a backup")]),e._v(" "),n("BackupUploader",{attrs:{loading:e.loading,"upload-request-callback":e.sendFile}}),e._v(" "),n("div",{staticClass:"guide"},[n("p",{staticClass:"title"},[e._v("Supported Sources")]),e._v("\n\n\t\tBecause Tachiyomi and Paperback both work with community-created\n\t\tsources, the backup conversion process can only use sources which\n\t\tboth Paperback and Tachiyomi share.\n\t\t"),n("br"),n("br"),e._v("\n\t\tBelow is a list of sources which this tool is able to handle.\n\t\t"),n("br"),e._v(" "),n("ul",e._l(e.converterNames,(function(t){return n("li",{key:t},[e._v("\n\t\t\t\t"+e._s(t)+"\n\t\t\t")])})),0),e._v("\n\n\t\tWe care about your privacy, the conversion process is done on your\n\t\tdevice and your backup will never be uploaded to the internet.\n\n\t\t"),e._m(0)])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"custom-block aside"},[t("p",[this._v("Contact us if you need additional sources support.")])])}],!1,null,"1cc17ae0",null);t.default=c.exports}}]);