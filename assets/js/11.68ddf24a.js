(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{572:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a(76),a(77),a(24),a(78),a(29),a(39),a(114);var n=a(91);function r(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=Object(n.a)(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,c=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return l=t.done,t},e:function(t){c=!0,s=t},f:function(){try{l||null==a.return||a.return()}finally{if(c)throw s}}}}},581:function(t,e,a){},711:function(t,e,a){"use strict";var n=a(581);a.n(n).a},729:function(t,e,a){"use strict";a.r(e);var n,r=a(74),i=a(572),s=(a(170),a(68),a(570),a(51),a(177),a(178),a(168),a(528),a(596)),l={data:function(){return{filters:{search:"",tabs:"",sources:""},dialog:{visible:!1,mangaObject:{}},canUploadBackup:!0,backup:{},backupFilename:""}},computed:{filtredLibrary:function(){var t=this;console.log(this.$data.backup),console.log(this.$data.backup.sources);var e=this.backup,a=this.filters,n=e.library;return a.search&&(n=n.filter((function(e){return t.includeInTitles(e.titles,a.search)}))),a.tabs.length>0&&(n=n.filter((function(t){var e,n=Object(i.a)(a.tabs);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t.tabsIds.includes(r))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}))),a.sources.length>0&&(n=n.filter((function(t){var e,n=Object(i.a)(a.sources);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t.sourcesIds.includes(r))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}))),n}},methods:{processFile:function(t){var e=this;this.$data.canUploadBackup=!1,this.$data.backupFilename=t.file.name,this.handleFile(t).then((function(t){e.$data.backup=t})).catch((function(t){console.error(t),e.$message({type:"error",message:t}),e.$data.canUploadBackup=!0}))},handleFile:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){var a,n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("application/json"!==e.file.type){t.next=9;break}return t.next=3,e.file.text();case 3:return a=t.sent,(n=new s.PaperbackBackupManager).loadText(a),t.abrupt("return",n.exportLightRepresentation());case 9:if("application/x-gzip"!==e.file.type){t.next=18;break}return t.next=12,e.file.arrayBuffer();case 12:return r=t.sent,(i=new s.TachiyomiBackupManager).loadProtoGz(r),t.abrupt("return",i.exportLightRepresentation());case 18:throw new Error("Unsupported file format: ".concat(e.file.type));case 19:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)}),includeInTitles:function(t,e){var a,n=e.toLowerCase().trim(),r=Object(i.a)(t);try{for(r.s();!(a=r.n()).done;){if(a.value.toLowerCase().includes(n))return!0}}catch(t){r.e(t)}finally{r.f()}return!1},showManga:function(t){this.$data.dialog={visible:!0,mangaObject:t}},closeBackup:function(){this.$data.backup={},this.$data.dialog.visible=!1,this.$data.canUploadBackup=!0}}},c=(a(711),a(38)),o=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.canUploadBackup?a("span",[a("BackupUploader",{attrs:{loading:!t.canUploadBackup,"upload-request-callback":t.processFile}})],1):a("span",[a("div",{staticClass:"guide"},[a("p",{staticClass:"title"},[a("ElButton",{attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(e){return t.closeBackup()}}}),t._v("\n\t\t\t\t"+t._s(t.backupFilename)+"\n\t\t\t")],1),t._v(" "),a("span",{staticClass:"filters-list"},[a("ElInput",{staticClass:"filter searchBar",attrs:{placeholder:"Search...",clearable:""},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}}),t._v(" "),Object.keys(t.backup.tabs).length?a("div",{staticClass:"filter tabsOption"},[t._v("\n\t\t\t\t\tLibrary tabs:\n\t\t\t\t\t"),a("ElSelect",{attrs:{placeholder:"All tabs",multiple:"",clearable:""},model:{value:t.filters.tabs,callback:function(e){t.$set(t.filters,"tabs",e)},expression:"filters.tabs"}},t._l(t.backup.tabs,(function(t,e){return a("ElOption",{key:e,attrs:{label:t,value:e}})})),1)],1):t._e(),t._v(" "),Object.keys(t.backup.sources).length?a("div",{staticClass:"filter sourcesOption"},[t._v("\n\t\t\t\t\tSources:\n\t\t\t\t\t"),a("ElSelect",{attrs:{placeholder:"All sources",multiple:"",clearable:""},model:{value:t.filters.sources,callback:function(e){t.$set(t.filters,"sources",e)},expression:"filters.sources"}},t._l(t.backup.sources,(function(t,e){return a("ElOption",{key:e,attrs:{label:t,value:e}})})),1)],1):t._e()],1)])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"backupContainer"},t._l(t.filtredLibrary,(function(e){return a("span",{key:e.id,staticClass:"mangaTile",on:{click:function(a){return t.showManga(e)}}},[a("BackupMangaTile",{attrs:{manga:e}})],1)})),0),t._v(" "),t.dialog.visible?a("ElDialog",{attrs:{title:t.dialog.mangaObject.titles[0],visible:t.dialog.visible,center:""},on:{"update:visible":function(e){return t.$set(t.dialog,"visible",e)}}},[a("BackupMangaPage",{attrs:{manga:t.dialog.mangaObject,tabs:t.backup.tabs,sources:t.backup.sources}})],1):t._e()],1)}),[],!1,null,"390cbb24",null);e.default=o.exports}}]);